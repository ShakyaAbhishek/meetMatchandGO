<!--
  Generated template for the EventDetailsPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
      <!-- <ion-grid style="align-items: normal;" >
          <ion-row>
            <ion-col col-3><button ion-button menuToggle>
                <ion-icon style="font-size: 3.2rem;margin-top: 5px; " name="menu"> </ion-icon>
              </button>
            </ion-col>
            <ion-col col-6><div style="width: 100% !important;
              margin-right: 15% !important;
              margin-top: -5px;">
                <img style="    width: 100%;" src="assets/imgs/logo.jpg">
              </div>
            </ion-col>
            <ion-col col-3><button  ion-button (click)="opnchat()" style="background: transparent;
              box-shadow: none;
              margin-left: 20px;
              margin-top: 0px;
              color: #000000" ><ion-icon style="font-size: 3.2rem;margin-top: 5px; " name="chatbubbles"></ion-icon></button>
            </ion-col>
          </ion-row>
        </ion-grid> -->
        <button ion-button menuToggle>
            <ion-icon name="menu"> </ion-icon>
          </button>
          <div class="img1">
            <img src="assets/imgs/logo.jpg">
          </div>
          <ion-buttons *ngIf="logged==true" end>
              <button ion-button icon-only (click)="opnchat()">
                <ion-icon name="chatbubbles"></ion-icon>
              </button>
            </ion-buttons>

  </ion-navbar>
</ion-header>


<ion-content  >
  <ion-card  *ngIf="event" >
    <ion-grid>
      <ion-row>
        <ion-col col-6>
    <img [src]="event.large_location_image"    style= "height: 195px;" />
    <div style=" text-align: center; background-color:#efba00; padding-top: 5px;padding-bottom: 5px;"><font style=" color: #000;font-size: 15px;">{{eventDate}}</font></div>
    </ion-col>
    <ion-col col-6 style="margin-top: -1px;" >
      <ion-card-title>
          <font color="#8b3532">{{event.event_type}} </font>
          
        <p style="border-bottom: 1px solid; font-weight: bold;">{{event.location}}
        <br> {{event.place}} </p>
      </ion-card-title>
      <p>
      <font color="black" style="font-weight: 600; padding-bottom: 2px;" >Organized by: </font><font color="black" style="font-weight: 600; padding-bottom: 2px;" >{{event.event_org}}</font>
      </p>
      <p>
        <ion-icon name="calendar" style="color:#8b3532;"></ion-icon><font color="black" style="font-weight: 600;"> {{eventDate}} </font>
      </p>
       <p>
        <ion-icon name="people" style="color:#8b3532;"></ion-icon><font color="black" style="font-weight: 600;"> Age: M({{event.age_range_men}})</font>
      </p>
      <p>
        <ion-icon name="people" style="color:#8b3532;"></ion-icon>
        <font color="black" style="font-weight: 600;"> Age: W({{event.age_range_women}})</font>
      </p>
      <p>
        <ion-icon name="cash" style="color:#8b3532;"></ion-icon><font color="black" style="font-weight: 600;"> {{event.formated_price}}</font>
      </p>
     
      <!-- <ion-row style="padding-left: 33px;">
         
            <button ion-button color="danger" style="height: 2.6rem;font-size: 1.2rem;" (click)="addReviews()">Add Review</button>                   
      </ion-row> -->
   </ion-col>
    </ion-row>
    <div *ngIf="eventStartDate(event.event_activation_time) <= 14">
  <!-- <p *ngIf="event.eodiscount" style="text-align: center; background-color: #efba00; color:black;font-size: 1.5rem;font-weight: 700;">Early Bird Discount : <span style="color: green; font-weight: 700;" > {{event.eodiscount}}% off if purchased now </span></p> --> 
  <p *ngIf="event.eodiscount" style="text-align: center; background-color: #efba00; color:black;font-size: 1.5rem;font-weight: 700;">Early
    Bird Discount : <span style="color: green; font-weight: 700;"> {{event.eodiscount}}% off if purchased
      now </span></p>   
</div>
    <ion-row>

      <ion-col col-6>
        <!-- <button ion-button block color="danger" style="height: 2.6rem;font-size: 1.2rem;" outline >Men: <font [color]="event.availability_m[1]">{{event.availability_m[0]+'('+event.availability_men+ ')'}}</font></button> -->
        <label color="#8b3532" style="font-weight: 700;">Men: </label>

             <font [color]= "event.availability_m[1]=='yellow'?'#efba00':event.availability_m[1]">
               <label style="font-weight: 700;" *ngIf="event.availability_men != 0" >{{event.availability_m[0]}} {{event.availability_m[1]== 'green'? null : '('+(event.availability_m[2])+')' }} </label>
             <button *ngIf="event.availability_men <= 0" style="border-radius: 2px; overflow: hidden; height: 1.6rem; font-size: 1.2rem; font-weight: 300;margin-top: -2px;" ion-button  color="secondary" (click)="addToWaitingLists(event.id,'M')">join waiting List</button>
             </font>                                    <!-- +'( '+event.availability_men+ ')' for show the availability in numbers -->
    </ion-col>
    <ion-col col-6>
      <!-- <button ion-button block color="danger" style="height: 2.6rem;font-size: 1.2rem;" outline >Woman: <font [color]="event.availability_f[1]">{{event.availability_f[0]+'('+event.availability_men+ ')'}}</font></button> -->
      <label color="#8b3532" style="font-weight: 700;">Women: </label>

      <font [color]="event.availability_f[1]=='yellow'?'#efba00':event.availability_f[1]">
          <label style="font-weight: 700;" *ngIf="event.availability_women != 0" >{{event.availability_f[0]}} {{event.availability_f[1]== 'green'? null : '('+(event.availability_f[2])+')' }}</label>
        <button *ngIf="event.availability_women <= 0" style="border-radius: 2px; overflow: hidden; height: 1.6rem; font-size: 1.2rem; font-weight: 300;margin-top: -2px;" ion-button  color="secondary" (click)="addToWaitingLists(event.id,'F')">join waiting List</button>
      </font>                                                      <!-- +'( '+event.availability_women+ ')' for show the availability in numbers -->
    </ion-col>
    </ion-row>
    </ion-grid>
   </ion-card>
   <ion-card>
    <div>
      <ion-segment [(ngModel)]="data" color="danger">
        <ion-segment-button value="Where" >
          <font color="#8b3532" style="font-weight: 1000;" > WHERE</font>


        </ion-segment-button>
        <ion-segment-button value="Details">
          <font color="#8b3532" style="font-weight: 1000;"> DETAILS</font>
        </ion-segment-button>
        <ion-segment-button value="Organizers">
          <font color="#8b3532" style="font-weight: 1000;"> ORGANISER</font>
        </ion-segment-button>
        <ion-segment-button value="Reviews">
          <font color="#8b3532" style="font-weight: 1000;"> REVIEW</font>
        </ion-segment-button>
        <ion-segment-button value="Map">
            <font color="#8b3532" style="font-weight: 1000;"> MAP </font>
          </ion-segment-button>
      </ion-segment>
    </div>
    
    <div [ngSwitch]="data">
      <ion-list *ngSwitchCase="'Details'">
        <ion-card>

          <ion-card-header>
            <ion-slides autoplay="600" loop="true" speed="3000" style="height: 213px;">
              <ion-slide >
                <img [src]="event.large_location_image">
              </ion-slide>
              <ion-slide > 
                <img src="assets/imgs/past_event2.jpg">

               <!-- <img [src]="event.large_location_image"> -->


              </ion-slide>
              <!-- <ion-slide >
                <img [src]="event.large_location_image">
              </ion-slide> -->
            </ion-slides>
          </ion-card-header>
        
          <ion-card-content>
              <table>
                  <tr>
                    <td><font style="color:#8b3532; font-weight:bold ">Theme Name</font></td>
                    <td>{{event.event_type}}</td>
                  </tr>
                  
                  <tr>
                    <td><font style="color:#8b3532; font-weight:bold ">Theme Description</font></td>
                    <td> {{event.theme_description}} </td>
                  </tr>
                  
                  <tr>
                  <td><font style="color:#8b3532; font-weight:bold ">Price</font></td>
                  <td>£{{event.price}}</td>
                  
                  </tr>
              
                  <tr>
                    <td><font style="color:#8b3532; font-weight:bold ">Age Guide</font></td>
                    <td>Men ({{event.age_range_men}}) , Women ({{event.age_range_women}})</td>
                       
                    </tr>
                    <tr>
                      <td><font style="color:#8b3532; font-weight:bold ">Event Description</font></td>
                      <td>{{event.description}}</td>
                  
                      </tr>
                      <tr>
                        <td><font style="color:#8b3532; font-weight:bold ">Doors Open</font></td>
                        <td>{{event.dooropen_time}}</td>
                      </tr>
                      <tr>
                        <td><font style="color:#8b3532; font-weight:bold ">Event Start</font></td>
                        <td>{{event.start_time}}</td>
                      </tr>
                      <tr>
                        <td><font style="color:#8b3532; font-weight:bold ">Events Ends</font></td>
                        <td>{{event.eventend_time}}</td>
                      </tr>
                      </table>
          </ion-card-content>
          <button ion-button round full style="margin: 3% 0 0 0;" (click)="bookNow(event.id)">BOOK NOW</button>
        </ion-card>
      </ion-list>
      

        <ion-list *ngSwitchCase="'Where'">
            <ion-card>
                <img [src]="event.large_location_image" style="height: 145px; text-align: left;
                padding: 0px 10px;" /><br>
                <p style="text-align: justify; padding: 13px; padding-top: 1px;"> {{event.location}} in {{event.place}} is a great place for meeting new people and having a socially relaxing and entertaining time. You will not be let down by our popular {{event.event_type}} events, hosted by our excellent speed dating hosts. If you have not already booked, book now and be ready to meet someone new.  
                  </p>

                  <table>
                      <tr>
                        <td><font style="color:#8b3532; font-weight:bold ">Venue</font></td>
                        <td>{{event.location}}</td>
                      </tr>
                      
                      <tr>
                        <td><font style="color:#8b3532; font-weight:bold ">Venue Address</font></td>
                        <td>{{event.venue_address}}</td>
                      </tr>
                      <tr>
                        <td>
                            <font style="color:#8b3532; font-weight:bold ">Postcode</font>
                        </td>
                        <td>{{event.venue_postcode}}</td>
                      </tr>
                      <tr>
                      <td><font style="color:#8b3532; font-weight:bold ">Tel</font></td>
                      <td>{{event.venue_phone_no}} – Please note this is not a booking line</td>
                      
                      </tr>
                  
                     
                      </table>
                      <button ion-button round full style="margin: 3% 0 0 0;" (click)="bookNow(event.id)">BOOK NOW</button>
            </ion-card>
          </ion-list>
      <ion-list *ngSwitchCase="'Organizers'">
              <ion-card>
                  <ion-grid>
                    <ion-row>
                      <ion-col col-6>
                        <img [src]="event.organiser_detail.imageUrl" style="height: 80%" />
           
                  </ion-col>
                  <ion-col col-6>
                    <ion-card-title>
                        <h1 style="color:#8b3532; border-bottom: 1px solid; font-weight:bold">{{event.organiser_detail.first_name}}</h1>
                      <h2 style="font-weight: 600; color:#8b3532"> About Organiser </h2>
                    </ion-card-title>
                    <br>
                  <p>{{event.organiser_detail.about_us}}</p>
                    <br>
                   </ion-col>
                  </ion-row>
                  </ion-grid>
                  <button ion-button round full style="margin: 3% 0 0 0;" (click)="bookNow(event.id)">BOOK NOW</button>
                 </ion-card>
          
        </ion-list>
        <ion-list *ngSwitchCase="'Map'">
            <ion-card *ngIf="mapurl" >
                <ion-card-content id="map-html">
                  <iframe [src]='mapurl' width="100%" height="450" frameborder="0" style="border:0" allowfullscreen></iframe>
                </ion-card-content>
                <button ion-button round full style="margin: 3% 0 0 0;" (click)="bookNow(event.id)">BOOK NOW</button>
               </ion-card>
               <ion-card *ngIf="!mapurl">
                 <div style="font-size: 20px; font-weight: 700; color: #e13838; text-align: center;" >  Location not available</div>
              </ion-card>
      </ion-list>
      <ion-list *ngSwitchCase="'Reviews'">
              <ion-card *ngFor="let review of review; let i=index;" >
                  <ion-card-header style="color: #efba00;font-size: 2.2em;">
                      <div *ngIf="review.rating == 5.0">
                          <ion-icon name="star"></ion-icon>
                          <ion-icon  name="star"></ion-icon>
                          <ion-icon name="star"></ion-icon>
                          <ion-icon name="star"></ion-icon>
                          <ion-icon name="star"></ion-icon>
                        </div>
                        <div *ngIf="review.rating == 4.5">
                            <ion-icon name="star"></ion-icon>
                            <ion-icon  name="star"></ion-icon>
                            <ion-icon name="star"></ion-icon>
                            <ion-icon name="star"></ion-icon>
                            <ion-icon name="star-half"></ion-icon>
                          </div>
                        <div *ngIf="review.rating == 4.0">
                            <ion-icon name="star"></ion-icon>
                            <ion-icon name="star"></ion-icon>
                            <ion-icon name="star"></ion-icon>
                            <ion-icon name="star"></ion-icon>
                            <ion-icon name="star-outline"></ion-icon>
                          </div>
                          <div *ngIf="review.rating == 3.5">
                              <ion-icon  name="star"></ion-icon>
                              <ion-icon name="star"></ion-icon>
                              <ion-icon name="star"></ion-icon>
                              <ion-icon name="star-half"></ion-icon>
                              <ion-icon name="star-outline"></ion-icon>
                            </div>
                          <div *ngIf="review.rating == 3.0">
                              <ion-icon name="star"></ion-icon>
                              <ion-icon name="star"></ion-icon>
                              <ion-icon name="star"></ion-icon>
                              <ion-icon name="star-outline"></ion-icon>
                              <ion-icon name="star-outline"></ion-icon>
                            </div>
                            <div *ngIf="review.rating == 2.5">
                                <ion-icon  name="star"></ion-icon>
                                <ion-icon name="star"></ion-icon>
                                <ion-icon name="star-half"></ion-icon>
                                <ion-icon name="star-outline"></ion-icon>
                                <ion-icon name="star-outline"></ion-icon>
                              </div>
                            <div *ngIf="review.rating == 2.0">
                                <ion-icon name="star"></ion-icon>
                                <ion-icon name="star"></ion-icon>
                                <ion-icon name="star-outline"></ion-icon>
                                <ion-icon name="star-outline"></ion-icon>
                                <ion-icon name="star-outline"></ion-icon>
                              </div>
                              <div *ngIf="review.rating == 1.5">
                                  <ion-icon  name="star"></ion-icon>
                                  <ion-icon name="star-half"></ion-icon>
                                  <ion-icon name="star-outline"></ion-icon>
                                  <ion-icon name="star-outline"></ion-icon>
                                  <ion-icon name="star-outline"></ion-icon>
                                </div>
                              <div *ngIf="review.rating == 1.0">
                                  <ion-icon name="star"></ion-icon>
                                  <ion-icon name="star-outline"></ion-icon>
                                  <ion-icon name="star-outline"></ion-icon>
                                  <ion-icon name="star-outline"></ion-icon>
                                  <ion-icon name="star-outline"></ion-icon>
                                </div>
                  </ion-card-header>
                  <ion-card-content>
                    
                    <label *ngIf="review.rating == 5.0" style="padding: 2px 8px 2px 8px; background-color: #5cb85c;font-size: 18px; border-radius: 4px; color: white;" >Rated {{review.rating}} out of 5.0</label>
                    <label *ngIf="review.rating == 4.5" style="padding: 2px 8px 2px 8px; background-color: #5cb85c;font-size: 18px; border-radius: 4px; color: white;" >Rated {{review.rating}} out of 5.0</label>
                    <label *ngIf="review.rating == 4.0" style="padding: 2px 8px 2px 8px; background-color: #428bca;font-size: 18px; border-radius: 4px; color: white;" >Rated {{review.rating}} out of 5.0</label>
                    <label *ngIf="review.rating == 3.5" style="padding: 2px 8px 2px 8px; background-color: #428bca;font-size: 18px; border-radius: 4px; color: white;" >Rated {{review.rating}} out of 5.0</label>
                    <label *ngIf="review.rating == 3.0" style="padding: 2px 8px 2px 8px; background-color: #428bca;font-size: 18px; border-radius: 4px; color: white;" >Rated {{review.rating}} out of 5.0</label>
                    <label *ngIf="review.rating == 2.5" style="padding: 2px 8px 2px 8px; background-color: #428bca;font-size: 18px; border-radius: 4px; color: white;" >Rated {{review.rating}} out of 5.0</label>
                    <label *ngIf="review.rating == 2.0" style="padding: 2px 8px 2px 8px; background-color: #efba00;font-size: 18px; border-radius: 4px; color: white;" >Rated {{review.rating}} out of 5.0</label>
                    <label *ngIf="review.rating == 1.5" style="padding: 2px 8px 2px 8px; background-color: #efba00;font-size: 18px; border-radius: 4px; color: white;" >Rated {{review.rating}} out of 5.0</label>
                    <label *ngIf="review.rating == 1.0" style="padding: 2px 8px 2px 8px; background-color: #dc1717;font-size: 18px; border-radius: 4px; color: white;" >Rated {{review.rating}} out of 5.0</label>
                   <br> <p style="font-weight:bold">By:{{review.user}} on  <span>{{review.created_on | date:'dd/MM/y' }}</span></p>
                    <h2 style="font-weight:bold;">Review</h2>
                    <p>{{review.description}}</p>
              
                    <!-- <div class="rating">
                      <span>☆</span><span>☆</span><span>☆</span><span>☆</span><span>☆</span>
                      </div> -->
                      <!-- <button ion-button color="default">Rated 4.0 out of 5</button><br>
                      <p style="font-weight:bold">By:Tom Tester on 14/09/2015</p>
                      <p>Review</p> 
                      <p  style="border-bottom: 2px solid #f1f1f1">Hosts were grate and had an enjoyable time</p> -->
                  </ion-card-content> 
                 
                </ion-card>
                <button ion-button round full style="margin: 3% 0 0 0;" (click)="bookNow(event.id)">BOOK NOW</button>
        
          
        </ion-list>
      </div> 
   </ion-card>
  
</ion-content>
